<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blink Stop - Don't Blink Challenge</title>
    <link rel="stylesheet" href="src/style.css?v=3">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="manifest" href="manifest.json">

    <!-- Social Sharing Meta Tags -->
    <meta property="og:title" content="Blink Stop - Don't Blink Challenge">
    <meta name="description"
        content="Test your willpower in Blink Stop. Stare into the void without blinking. How long can you last?">
    <meta property="og:type" content="website">
    <meta property="og:image"
        content="https://raw.githubusercontent.com/google/mediapipe/master/mediapipe/graphs/face_mesh/data/face_mesh_android_gpu.png">
    <!-- Placeholder image -->

    <!-- MediaPipe Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <!-- AdSense Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4512722496678449"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <!-- Video Feed & Canvas Overlay -->
        <div class="video-wrapper">
            <video class="input_video" playsinline></video>
            <canvas class="output_canvas"></canvas>

            <!-- Game Overlay UI -->
            <div class="ui-overlay" id="ui-layer">
                <!-- Main Menu -->
                <div id="menu-screen" class="screen active">
                    <h1 class="glitch" data-text="BLINK STOP">BLINK STOP</h1>
                    <p class="subtitle">Challenge your reflexes</p>

                    <div class="mode-selection">
                        <button class="neon-btn mode-btn" data-mode="CLASSIC">CLASSIC<span class="btn-sub">Survive the
                                Void</span></button>
                        <button class="neon-btn mode-btn" data-mode="PRECISION">PRECISION<span class="btn-sub">Target
                                Mode</span></button>
                        <button class="neon-btn mode-btn" data-mode="ENDURANCE">ENDURANCE<span class="btn-sub">30s
                                Challenge</span></button>
                    </div>

                    <!-- Precision Options (Hidden by default) -->
                    <div id="precision-options" class="options-container hidden">
                        <p class="label">SELECT TARGET</p>
                        <div class="option-btns">
                            <button class="neon-btn-small option-btn active" data-time="5">5s</button>
                            <button class="neon-btn-small option-btn" data-time="10">10s</button>
                            <button class="neon-btn-small option-btn" data-time="15">15s</button>
                        </div>
                    </div>

                    <p class="loading-text" id="loading-msg">INITIALIZING BLINK DETECTION...</p>

                    <!-- AdSense Banner -->
                    <div class="ad-banner">
                        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4512722496678449"
                            data-ad-slot="auto" data-ad-format="auto" data-full-width-responsive="true"></ins>
                        <script>
                            (adsbygoogle = window.adsbygoogle || []).push({});
                        </script>
                    </div>
                </div>

                <!-- Calibration Screen -->
                <div id="calibration-screen" class="screen hidden">
                    <h2 class="glitch" data-text="CALIBRATING">CALIBRATING</h2>
                    <p class="subtitle">Keep your eyes open normally</p>
                    <div class="calibration-loader">
                        <div class="loader-bar"></div>
                    </div>
                    <p id="calibration-status" class="digital-text-sm">3.00s</p>
                </div>

                <!-- Endurance Mode Screen (Video Player) -->
                <div id="endurance-screen" class="screen hidden">
                    <h2 class="glitch" data-text="ENDURANCE TEST">ENDURANCE TEST</h2>
                    <div class="video-container">
                        <!-- Placeholder Video (Sci-Fi Loop) -->
                        <video id="ad-video"
                            src="https://media.istockphoto.com/id/1322205588/video/abstract-digital-technology-background-loop-3d-render.mp4?s=mp4-640x640-is&k=20&c=y-lq7w0q_q_q_q_q_q_q_q_q_q_q_q_q"
                            loop muted playsinline></video>
                        <div class="upload-progress-bar">
                            <div class="upload-progress" id="upload-progress"></div>
                        </div>
                    </div>
                    <p class="subtitle warning">STARE INTO THE VOID FOR 30 SECONDS</p>
                </div>

                <!-- HUD -->
                <div id="game-hud" class="screen hidden">
                    <div class="hud-top-left">
                        <button id="home-btn" class="menu-btn-hud">MENU</button>
                    </div>

                    <!-- World Record Display (Classic Mode) -->
                    <div id="world-record-display" class="world-record-hud hidden">
                        <span class="label">WORLD RECORD</span>
                        <span id="wr-value" class="digital-text-sm">--</span>
                    </div>

                    <div class="score-container">
                        <span class="label" id="hud-label">TIME</span>
                        <span id="score" class="digital-text">0.00s</span>
                    </div>
                    <div class="target-container hidden" id="target-display">
                        <span class="label">TARGET</span>
                        <span class="digital-text-sm">10.00s</span>
                    </div>
                </div>

                <!-- Game Over -->
                <div id="game-over-screen" class="screen hidden">
                    <h2 class="neon-text-red" id="game-over-title">BLINK DETECTED</h2>

                    <div class="final-score">
                        <span class="label" id="final-score-label">YOU SURVIVED</span>
                        <span id="final-score-val" class="digital-text-lg">0.00s</span>
                        <!-- Secondary Detail for Precision Mode -->
                        <div id="final-score-sub" class="score-sub hidden"></div>
                        <!-- World Record for Classic Mode -->
                        <div id="game-over-world-record" class="score-sub hidden"></div>
                    </div>

                    <div class="name-entry-container">
                        <input type="text" id="player-name-input" placeholder="ENTER NAME" maxlength="10">
                        <button id="save-score-btn" class="neon-btn-small">SAVE</button>
                    </div>

                    <!-- Leaderboards -->
                    <div class="leaderboard-container">
                        <h3>YOUR TOP SCORES</h3>
                        <ul id="leaderboard-list">
                            <!-- Populated by JS -->
                        </ul>
                    </div>

                    <!-- Global Leaderboard - Hidden -->
                    <div class="leaderboard-container" style="display: none;">
                        <h3>üåç GLOBAL TOP 10</h3>
                        <ul id="global-leaderboard-list">
                            <li>Loading...</li>
                        </ul>
                    </div>

                    <div class="game-over-btns">
                        <button id="restart-btn" class="neon-btn">RETRY</button>
                        <button id="share-btn" class="neon-btn">SHARE</button>
                    </div>
                    <button id="menu-btn" class="neon-btn-small">MENU</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacy-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="glitch" data-text="PRIVACY POLICY">PRIVACY POLICY</h2>
                <button class="close-btn" id="close-privacy">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Camera Access</h3>
                <p>Blink Stop requires camera access to detect eye blinks using facial landmark detection.</p>

                <h3>Data Processing</h3>
                <p><strong>All camera data is processed locally on your device.</strong> We do not:</p>
                <ul>
                    <li>Upload or transmit camera footage to any server</li>
                    <li>Store camera images or video recordings</li>
                    <li>Share your camera data with third parties</li>
                    <li>Collect personally identifiable information</li>
                </ul>

                <h3>Local Storage</h3>
                <p>We use browser LocalStorage to save:</p>
                <ul>
                    <li>Leaderboard scores (name and time)</li>
                    <li>Unlocked themes</li>
                </ul>
                <p>This data remains on your device and can be cleared at any time through your browser settings.</p>

                <h3>Third-Party Services</h3>
                <p>We use MediaPipe Face Mesh (Google) for facial landmark detection. The library runs entirely in your
                    browser.</p>

                <p class="last-updated">Last Updated: November 24, 2025</p>
            </div>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div id="tos-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="glitch" data-text="TERMS OF SERVICE">TERMS OF SERVICE</h2>
                <button class="close-btn" id="close-tos">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Acceptance of Terms</h3>
                <p>By accessing and using Blink Stop ("the Game"), you agree to be bound by these Terms of Service.</p>

                <h3>Use of the Game</h3>
                <p>Blink Stop is provided for entertainment purposes only. You agree to:</p>
                <ul>
                    <li>Use the Game in a safe environment</li>
                    <li>Not attempt to cheat or exploit the Game</li>
                    <li>Not use automated tools or bots</li>
                    <li>Grant camera access for gameplay (processed locally)</li>
                </ul>

                <h3>User Content</h3>
                <p>Leaderboard names and scores you submit become part of the Game. You agree not to submit:</p>
                <ul>
                    <li>Offensive or inappropriate names</li>
                    <li>Personally identifiable information</li>
                    <li>Copyrighted or trademarked content</li>
                </ul>

                <h3>Disclaimer</h3>
                <p><strong>The Game is provided "AS IS" without warranties of any kind.</strong> We are not liable for:
                </p>
                <ul>
                    <li>Eye strain or discomfort from gameplay</li>
                    <li>Technical issues or bugs</li>
                    <li>Loss of scores or data</li>
                    <li>Interruptions in service</li>
                </ul>

                <h3>Changes to Terms</h3>
                <p>We reserve the right to modify these terms at any time. Continued use of the Game constitutes
                    acceptance of updated terms.</p>

                <h3>Contact</h3>
                <p>For questions about these terms, contact: legal@playblinkstop.com</p>

                <p class="last-updated">Last Updated: November 24, 2025</p>
            </div>
        </div>
    </div>

    <!-- Help/FAQ Modal -->
    <div id="help-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="glitch" data-text="HELP & FAQ">HELP & FAQ</h2>
                <button class="close-btn" id="close-help">&times;</button>
            </div>
            <div class="modal-body">
                <h3>üìñ HOW TO PLAY</h3>

                <h4>CLASSIC MODE</h4>
                <p>Survive as long as possible without blinking. The longer you last, the more intense it gets with
                    visual effects and faster audio!</p>

                <h4>PRECISION MODE</h4>
                <p>Choose a target time (5s, 10s, or 15s). Try to blink at the exact moment! Lower difference = better
                    score.</p>

                <h4>ENDURANCE MODE</h4>
                <p>Stare for 30 seconds straight without blinking. Complete this challenge to unlock exclusive themes!
                </p>

                <h3>üí° TIPS</h3>
                <ul>
                    <li>Stare at the center of the screen</li>
                    <li>Blink before starting, then keep eyes open</li>
                    <li>Good lighting helps with detection</li>
                    <li>Sit 1-2 feet away from your camera</li>
                </ul>

                <h3>üì∑ CAMERA & PRIVACY</h3>
                <p><strong>Your privacy is protected!</strong></p>
                <ul>
                    <li>Camera feed is processed locally on your device</li>
                    <li>No video is recorded or uploaded</li>
                    <li>We only store your name + score on leaderboards</li>
                </ul>

                <p><strong>Granting Camera Permission:</strong></p>
                <ul>
                    <li><strong>iOS Safari:</strong> Tap "Allow" when prompted. If denied, tap "AA" ‚Üí Website Settings ‚Üí
                        Enable Camera</li>
                    <li><strong>Android Chrome:</strong> Tap "Allow" when prompted</li>
                </ul>

                <h3>How do I play?</h3>
                <p><strong>CLASSIC:</strong> Stare without blinking for as long as possible.<br>
                    <strong>PRECISION:</strong> Blink at exactly the target time (5s, 10s, or 15s).<br>
                    <strong>ENDURANCE:</strong> Survive 30 seconds without blinking.
                </p>

                <h3>Tips for Better Detection</h3>
                <p><strong>Calibration:</strong> Play a few rounds to help the camera learn your blink pattern.<br>
                    <strong>Camera Position:</strong> Look directly at the camera, not the screen, while playing.<br>
                    <strong>Lighting:</strong> Ensure good lighting on your face for best results.
                </p>

                <h3>‚ùì TROUBLESHOOTING</h3>

                <p><strong>Game won't start?</strong><br>
                    ‚Üí Grant camera permission in browser settings and refresh</p>

                <p><strong>Face not detected?</strong><br>
                    ‚Üí Improve lighting, move closer to camera</p>

                <p><strong>Blinks not detected properly?</strong><br>
                    ‚Üí Adjust lighting, try recalibrating by restarting the game</p>

                <p><strong>Camera being used by another app?</strong><br>
                    ‚Üí Close other apps (Zoom, FaceTime, etc.) and try again</p>
            </div>
        </div>
    </div>

    <!-- AdSense Content Section -->
    <section id="game-info" class="content-section">
        <div class="content-container">
            <article>
                <h2 class="neon-text-cyan">ABOUT BLINK STOP</h2>
                <p>Blink Stop is an advanced AI-powered challenge designed to test your reflexes and willpower. Using
                    cutting-edge facial recognition technology directly in your browser, it tracks your eye movements in
                    real-time to detect even the slightest blink.</p>
                <p>Inspired by the "Don't Blink" episodes of Doctor Who and the staring contests of childhood, Blink
                    Stop brings a high-stakes, cyberpunk arcade experience to your device. Whether you're training for a
                    staring contest or just testing your focus, this is the ultimate endurance test.</p>
            </article>

            <article>
                <h2 class="neon-text-pink">GAME MODES EXPLAINED</h2>

                <div class="mode-detail">
                    <h3>üïπÔ∏è CLASSIC MODE</h3>
                    <p>The original challenge. Stare into the void for as long as you can. The game tracks your time
                        down to the millisecond. As time passes, the visual and audio intensity increases, testing your
                        ability to maintain focus under pressure.</p>
                </div>

                <div class="mode-detail">
                    <h3>üéØ PRECISION MODE</h3>
                    <p>A test of timing and control. You select a target time (5s, 10s, or 15s) and must blink as close
                        to that target as possible. It requires an internal clock and the ability to suppress your blink
                        reflex until the perfect moment.</p>
                </div>

                <div class="mode-detail">
                    <h3>üî• ENDURANCE MODE</h3>
                    <p>The ultimate test of willpower. You must survive for a full 30 seconds without blinking. This
                        mode features a unique visual experience and unlocks exclusive themes upon completion. It is not
                        for the faint of heart.</p>
                </div>
            </article>

            <article>
                <h2 class="neon-text-cyan">THE SCIENCE OF BLINKING</h2>
                <p>On average, a human blinks 15-20 times per minute. Blinking serves two main purposes: keeping the
                    eyes lubricated and clearing away dust particles. However, research suggests we also blink to give
                    our brains a tiny "micro-rest," momentarily cutting off visual stimuli to process information.</p>
                <p>By suppressing this reflex in Blink Stop, you are actively fighting your body's natural biological
                    rhythm, requiring intense concentration and dopamine regulation.</p>
            </article>

            <article>
                <h2 class="neon-text-pink">MASTERY TIPS</h2>
                <ul class="tips-list">
                    <li><strong>Relax Your Face:</strong> Tension in your forehead makes you want to blink more. Relax
                        your facial muscles.</li>
                    <li><strong>Look slightly down:</strong> This exposes less of your eye surface area to the air,
                        reducing dryness.</li>
                    <li><strong>De-focus:</strong> Instead of staring intensely at one pixel, try to "soften" your gaze
                        to take in the whole screen.</li>
                    <li><strong>Breathe:</strong> It's easy to hold your breath while concentrating. Regular breathing
                        helps calm your nervous system.</li>
                </ul>
            </article>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <button class="footer-link" id="menu-footer-link">Menu</button>
        <span class="footer-separator">|</span>
        <button class="footer-link" id="help-link">Help & FAQ</button>
        <span class="footer-separator">|</span>
        <button class="footer-link" id="privacy-link">Privacy Policy</button>
        <span class="footer-separator">|</span>
        <button class="footer-link" id="tos-link">Terms of Service</button>
    </footer>

    <script type="module" src="src/main.js?v=60"></script>
</body>

</html>